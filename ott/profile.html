<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Netflix Profiles</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        background: linear-gradient(to bottom, rgba(0,0,0,0.8), rgba(20,20,20,1)),
                    url('https://assets.nflxext.com/ffe/siteui/vlv3/53ff1d43-f324-4c92-b5dc-bc6cf5c1f3a3/web_background.jpg') no-repeat center center/cover;
        color: white;
        min-height: 100vh;
    }
    .profile-card {
        text-align: center;
        cursor: pointer;
        animation: fadeZoom 0.6s ease forwards;
        position: relative;
    }
    .profile-card img {
        border-radius: 4px;
        transition: transform 0.3s ease;
        width: 150px;
        height: 150px;
        object-fit: cover;
    }
    .profile-card:hover img {
        transform: scale(1.05);
    }
    .kids-badge {
        position: absolute;
        bottom: 8px;
        right: 8px;
        background: #ff9900;
        color: #000;
        padding: 2px 6px;
        font-size: 0.7rem;
        font-weight: bold;
        border-radius: 3px;
    }
    @keyframes fadeZoom {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }
    .manage-btns {
        display: none;
    }
    .manage-mode .manage-btns {
        display: block;
    }
    .add-profile {
        border: 2px dashed gray;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: gray;
        height: 150px;
        border-radius: 4px;
    }
    iframe {
        width: 100%;
        height: 400px;
        border: none;
        margin-top: 30px;
    }
</style>
</head>
<body>

<div class="container text-center py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Who's Watching?</h1>
        <div>
            <button id="manageBtn" class="btn btn-outline-light me-2">Manage Profiles</button>
            <button id="logoutBtn" class="btn btn-danger">Logout</button>
        </div>
    </div>

    <div class="row g-4" id="profilesContainer"></div>

    <iframe id="myListFrame" src="myList.html"></iframe>
</div>

<!-- Edit Profile Modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content bg-dark text-white">
            <div class="modal-header">
                <h5 class="modal-title">Edit Profile</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="text" id="editProfileName" class="form-control mb-3">
                <div class="d-flex flex-wrap gap-2">
                    <img src="https://occ-0-3216-3217.1.nflxso.net/dnm/api/v6/...jpg" class="avatar-option" width="60">
                    <img src="https://occ-0-3216-3217.1.nflxso.net/dnm/api/v6/...jpg" class="avatar-option" width="60">
                    <img src="https://occ-0-3216-3217.1.nflxso.net/dnm/api/v6/...jpg" class="avatar-option" width="60">
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveEditBtn" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    
    let profiles = JSON.parse(localStorage.getItem('profiles')) || [
        { name: 'User 1', img: 'https://i.pinimg.com/564x/1b/a2/e6/1ba2e6d1d4874546c70c91f1024e17fb.jpg', kids: false },
        { name: 'Kids', img: 'https://upload.wikimedia.org/wikipedia/commons/6/69/Netflix_logo.svg', kids: true }
    ];
    let selectedProfileIndex = null;
    const profilesContainer = document.getElementById('profilesContainer');

    function renderProfiles() {
        profilesContainer.innerHTML = '';
        profiles.forEach((p, i) => {
            const col = document.createElement('div');
            col.className = 'col-auto';
            col.innerHTML = `
                <div class="profile-card" data-index="${i}">
                    <img src="${p.img}" alt="${p.name}">
                    ${p.kids ? '<div class="kids-badge">KIDS</div>' : ''}
                    <div>${p.name}</div>
                    <div class="manage-btns mt-2">
                        <button class="btn btn-sm btn-warning edit-btn">Edit</button>
                        <button class="btn btn-sm btn-danger remove-btn">Remove</button>
                    </div>
                </div>
            `;
            profilesContainer.appendChild(col);
        });
        // Add profile card
        const addCol = document.createElement('div');
        addCol.className = 'col-auto';
        addCol.innerHTML = `
            <div class="add-profile" id="addProfileBtn">
                <div style="font-size:2rem;">+</div>
                <small>Add Profile</small>
            </div>
        `;
        profilesContainer.appendChild(addCol);
    }

    function saveProfiles() {
        localStorage.setItem('profiles', JSON.stringify(profiles));
    }

    // Initial render
    renderProfiles();

    // Event Delegation
    profilesContainer.addEventListener('click', (e) => {
        const profileCard = e.target.closest('.profile-card');
        if (e.target.classList.contains('edit-btn')) {
            selectedProfileIndex = +profileCard.dataset.index;
            document.getElementById('editProfileName').value = profiles[selectedProfileIndex].name;
            new bootstrap.Modal(document.getElementById('editProfileModal')).show();
        } else if (e.target.classList.contains('remove-btn')) {
            profiles.splice(+profileCard.dataset.index, 1);
            saveProfiles();
            renderProfiles();
        } else if (profileCard) {
            document.getElementById('myListFrame').scrollIntoView({ behavior: 'smooth' });
        } else if (e.target.id === 'addProfileBtn' || e.target.closest('#addProfileBtn')) {
            profiles.push({ name: 'New Profile', img: 'https://occ-0-3216-3217.1.nflxso.net/dnm/api/v6/...jpg', kids: false });
            saveProfiles();
            renderProfiles();
        }
    });

    // Save Edit Changes
    document.getElementById('saveEditBtn').addEventListener('click', () => {
        profiles[selectedProfileIndex].name = document.getElementById('editProfileName').value;
        saveProfiles();
        renderProfiles();
        bootstrap.Modal.getInstance(document.getElementById('editProfileModal')).hide();
    });

    // Manage Profiles Toggle
    document.getElementById('manageBtn').addEventListener('click', () => {
        document.getElementById('profilesContainer').classList.toggle('manage-mode');
    });

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
        alert('Logging out...');
    });
</script>
</body>
</html>

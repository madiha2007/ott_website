<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
    <title>OTT Index</title>
</head>
<body class="bg">

    <section class="darkened-image">
        <nav class="navbar  d-flex  px-5">
          
          <!-- Left logo -->

            <img class="img-fluid w-25 " src="https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png" alt="" >
       
          <!-- Right buttons container -->
          <div class="d-flex gap-3 ">
            <div class=" dropdown">
             <button class="btn btn-outline-light dropdown-toggle btn-lg fs-5 w-100" data-bs-toggle="dropdown"> <i class="bi bi-globe2"></i> <span class="d-none d-sm-inline">English </span>            </button>
             <ul class="dropdown-menu">
                <li class="dropdown-item" >Hindi</li>
                <li class="dropdown-item" >Marathi</li>
                <li class="dropdown-item" >Korean</li>
                <li class="dropdown-item" >Chinese</li>
                <li class="dropdown-item" >Spanish</li>
                
             </ul>
            </div>
            <a class="nav-item" href="signUp.html">
              <button class="btn btn-danger btn-lg fs-5 w-100">Sign In</button>
            </a>
          </div>
          
        </nav>

        <div class="container align-items-center justify-content-between">
            <div class="container content p-5">
                <h1 class="text-light dynamic-text text-center">Unlimited Movies, TV Shows and More..</h1>
                <p class="text-light text-center fs-2 ">Watch Anywhere, Cancel Anytime..</p>
                <p class="text-light text-center fs-4"> <span class="font-weight-normal"> Ready to watch? Enter your E-mail to create or restart your membership..</span> </p>
            </div>

          
                <div class="container p-5">
                    <div class="d-md-flex ">
        
                        <div class="input-group news-input">
                            <input type="text" id="visitorName" class="form-control bg-dark text-light" placeholder="Enter username" />

                            <button class="btn btn-danger btn-lg" type="button"  onclick="logVisitor(), handleGetStarted()">Get Started <i class="bi bi-chevron-right"></i> </button>


                          </div>
                    </div>
                </div>
        </div>
      </section>

      <div id="Overlay" style="
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 100vw;
      background-color: rgba(0, 0, 0, 0.9);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: white;
      opacity: 0;
    ">
      <h1 class="mb-3 display-1" id="greetingMessage"></h1>
    </div>
    
      
<script>

function logVisitor() {
  const name = document.getElementById("visitorName").value;

  fetch("http://localhost:5000/log-visitor", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      name: name,
      userAgent: navigator.userAgent,
    }),
  })
    .then( res => res.json())
    .then(data =>
      console.log("Visitor logged:", data))
    .catch(err => {
      console.error("Error logging visitor:", err);
    });
}

  // force-hide on load as a fallback
  document.addEventListener("DOMContentLoaded", function () {
    const overlay = document.getElementById("Overlay");
    overlay.style.display = "none";
    overlay.style.opacity = 0;
  });

  


  function handleGetStarted() {
    const usernameInput = document.querySelector(".news-input input");
    const overlay = document.getElementById("Overlay");
    const greetingMessage = document.getElementById("greetingMessage");

    const username = usernameInput.value.trim() || "Guest";
    greetingMessage.textContent = `Hello, ${username}!`;

    // Show overlay with fade-in
    overlay.style.display = "flex";
    overlay.style.opacity = 0;
    overlay.style.transition = "opacity 2s";
    setTimeout(() => {
      overlay.style.opacity = 1;
    }, 10);

    // After 2 seconds, fade out and redirect
    setTimeout(() => {
      overlay.style.opacity = 0;
      setTimeout(() => {
        window.location.href = "landingPage.html";
      }, 1000);
    }, 2000);
  }

 fetch("http://localhost:5000/log-visitor", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
})
  .then((res) => {
    if (res.ok) {
      console.log("Visitor logged successfully");
    } else {
      console.error("Logging failed");
    }
  })
  .catch((err) => {
    console.error("Error logging visitor:", err);
  });

</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>